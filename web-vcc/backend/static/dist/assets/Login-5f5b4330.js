/**
 * The frontend part of web-vcc
 * @copyright The vcc group
 * @license AGPL-3.0-or-later
 */
import{Z as k,d as n,g as T,$ as _,c as L,a as C,p as m,T as O,b as S,o as e,h as A,a0 as h,a1 as G,a2 as I,k as P,a3 as U,r as p,a4 as D}from"./index-057a36d6.js";function q(){var d,u;k(()=>D(()=>import("./Chat-e0fa4666.js"),["assets/Chat-e0fa4666.js","assets/index-057a36d6.js","assets/index-71570292.css"]));const b=n(s=>s.username),r=n(s=>s.changeUsername),t=T(),o=_(),{errorAlert:g}=L(),c=n(s=>s.success),N=n(s=>s.failed),f=n(s=>s.startGet),l=n(s=>s.type),i=n(s=>s.setToken),{t:a}=C();m(()=>{o!==void 0&&(o.success?(c(),i(o.token),t("/")):(g(a("Operation failed")),N()))},[o]),m(()=>{l==h.LOGIN_SUCCESS&&t("/")},[l]);const v=O(async()=>{U();const{url:s,requestID:x}=await p.oauth.request();window.open(s,"_blank","noopener,noreferrer,popup");const{username:w,token:y}=await p.oauth.login(x);i(y),r(w),c(),t("/")},[]);return S("Login"),e(P,{children:e("div",{className:A("hero min-h-screen bg-base-200",{hidden:l!=h.NOT_LOGIN}),children:e(G,{method:"post",className:"hero-content flex-col lg:flex-row-reverse",onSubmit:()=>{f()},children:[e("div",{className:"text-center lg:text-left",children:[e("h1",{className:"text-5xl font-bold",children:a("Login now!")}),e("p",{className:"py-6",children:a("To send messages, you need to login first.")})]}),e("div",{className:"card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100",children:e("div",{className:"card-body p-7",children:[e("div",{className:"form-control",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:a("Username")})}),e("input",{type:"text",placeholder:(d=a("Username"))!=null?d:void 0,className:"input input-bordered",name:"username",value:b,onInput:s=>{r(s.currentTarget.value)}})]}),e("div",{className:"form-control",children:[e("label",{className:"label",children:e("span",{className:"label-text",children:a("Password")})}),e("input",{type:"password",placeholder:(u=a("Password"))!=null?u:void 0,className:"input input-bordered",name:"password"})]}),e("div",{className:"form-control mt-6 flex space-y-2",children:[e("div",{className:"flex w-full btn-group",children:[e("button",{className:"btn btn-ghost",onClick:()=>{t("/register")},type:"button",children:a("Register")}),e("button",{className:"flex-1 btn btn-primary",type:"submit",children:a("Login")})]}),e("button",{className:"btn",onClick:v,type:"button",children:a("Continue with Github")})]}),e(I,{})]})})]})})})}export{q as Component};
